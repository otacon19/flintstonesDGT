<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="flintstones.menu.file"
               label="File"
               mnemonic="A">
            <command
                  commandId="sinbad2.workspace.io.new"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.read"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.save"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.save.as"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.save.and.close"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.exit"
                  id="exit"
                  label="&amp;Exit"
                  style="push">
            </command>
         </menu>
         <menu
               id="flintstones.menu.edit"
               label="Edit"
               mnemonic="E">
            <command
                  commandId="sinbad2.workspace.undo"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.redo"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="sinbad2.toolbar.file"
               label="File">
            <command
                  commandId="sinbad2.workspace.io.new"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.read"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.save"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.io.save.and.close"
                  style="push">
            </command>
         </toolbar>
         <toolbar
               id="sinbad2.toolbar.edit"
               label="Edit">
            <command
                  commandId="sinbad2.workspace.undo"
                  style="push">
            </command>
            <command
                  commandId="sinbad2.workspace.redo"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="sinbad2.workspace.commands.category"
            name="Core commands">
      </category>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="sinbad2.workspace.io.new"
            name="&amp;New">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="sinbad2.workspace.io.read"
            name="O&amp;pen">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="sinbad2.workspace.io.save"
            name="&amp;Save">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="sinbad2.workspace.io.save.as"
            name="Sa&amp;ve as...">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="sinbad2.workspace.io.save.and.close"
            name="Save &amp;and close">
      </command>
      <category
            id="sinbad2.ui.category_undo_redo"
            name="undo_redo">
      </category>
      <command
            categoryId="sinbad2.ui.category_undo_redo"
            id="sinbad2.workspace.undo"
            name="Undo">
      </command>
      <command
            categoryId="sinbad2.ui.category_undo_redo"
            id="sinbad2.workspace.redo"
            name="Redo">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="sinbad2.core.undoable.handler.RedoOperationHandler"
            commandId="sinbad2.workspace.redo">
      </handler>
      <handler
            class="sinbad2.core.undoable.handler.UndoOperationHandler"
            commandId="sinbad2.workspace.undo">
         <enabledWhen>
            <with
                  variable="flintstones.ui.undo.state">
               <equals
                     value="ENABLED">
               </equals>
            </with>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="oneElementSelected">
         <with
               variable="selection">
            <count
                  value="1">
            </count>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="sinbad2.workspace.io.new"
            icon="icons/new_16.png">
      </image>
      <image
            commandId="sinbad2.workspace.io.read"
            icon="icons/read_16.png">
      </image>
      <image
            commandId="sinbad2.workspace.io.save"
            icon="icons/save_16.png">
      </image>
      <image
            commandId="sinbad2.workspace.io.save.as"
            icon="icons/save-as_16.png">
      </image>
      <image
            commandId="sinbad2.workspace.io.save.and.close"
            icon="bin/save-and-close_16.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.exit"
            icon="icons/exit_16.png">
      </image>
      <image
            commandId="sinbad2.workspace.undo"
            disabledIcon="platform:/plugin/org.eclipse.ui/icons/full/dtool16/undo_edit.gif"
            icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/undo_edit.gif">
      </image>
      <image
            commandId="sinbad2.workspace.redo"
            disabledIcon="platform:/plugin/org.eclipse.ui/icons/full/dtool16/redo_edit.gif"
            icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/redo_edit.gif">
      </image>
   </extension>

</plugin>
